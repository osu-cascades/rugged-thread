<div class="row mb-4">
  <div class="col">
    <h1 class="display-6"><%= filterable_model_list_title 'Shop Parameters' %></h1>
  </div>
  <div class="col text-end align-self-center">
    <%= link_to 'Add New Shop Parameter', new_shop_parameter_path, class: 'btn btn-sm btn-outline-primary' %>
  </div>
</div>

<div class="row mb-4">
  <div class="col-8">
  </div>
  <div class="filter col-4 d-flex align-items-center justify-content-end">
    <strong class="text-muted">Filter:</strong>
    <% if params[:show_archive] %>
      <%= link_to 'archived', shop_parameters_path, class: "badge rounded-pill bg-secondary" %>
    <% else %>
      <%= link_to 'archived', shop_parameters_path(show_archive: 'true'), class: "badge rounded-pill bg-light text-muted" %>
    <% end %>
  </div>
</div>

<table class="table table-hover table-borderless" id="shop_parameters_table">
  <thead>
    <tr>
      <th scope="col">Name</th>
      <th scope="col">Amount</th>
    </tr>
  </thead>
  <tbody>
    <% @shop_parameters.each do |shop_parameter| %>
      <tr class="<%= dom_class(shop_parameter) %> clickable-row" id="<%= dom_id(shop_parameter) %>" data-href="<%= shop_parameter_path(shop_parameter) %>" tabindex="0">
        <td>
          <%= shop_parameter %>
        </td>
        <td>
          <%= shop_parameter.amount %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>

<script>
{
  function navigate(row) {
    const fakeLink = document.createElement("a");
    document.body.append(fakeLink);
    fakeLink.href = row.dataset.href
    fakeLink.click();
    fakeLink.remove();
  }
  const clickable_rows = document.getElementsByClassName("clickable-row");
  Array.prototype.forEach.call(clickable_rows, (row) => {
      row.addEventListener("click", () => {navigate(row);});
      row.addEventListener("keydown", (e) => {
        if (e.code === "Enter") {navigate(row);}
      });
  });
}
</script>
